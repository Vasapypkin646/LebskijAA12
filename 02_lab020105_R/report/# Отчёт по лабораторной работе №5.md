# Отчёт по лабораторной работе №5  
**Тема:** Функциональное программирование (итерации и конвейеры)  

---

## Сведения о студенте  
**Дата:** [2025-11-12]  
**Семестр:** [2 курс, 1 семестр]  
**Группа:** [Пин-б-о-24-1]  
**Дисциплина:** [Технологии программирования]  
**Студент:** [Лебский Артём Александрович]  

---

## Цель работы  
Познакомиться с особенностями функционального программирования. Научиться применять функциональное программирование с использованием пакета purrr. Решить задания в соответствующем стиле программирования. Составить отчет.

---

## Ход работы  

### 1. Теоретическая часть  

**Функциональное программирование** в R поддерживается с помощью пакета `purrr`, который предоставляет инструменты для работы с функциями и данными в функциональном стиле.

**Основные концепции:**

- **Итерация** - организация обработки данных, при которой действия повторяются многократно
- **Конвейеры (pipeline)** - инструмент для передачи значения исходной функции в последующую с помощью оператора `%>%`

**Функции семейства map:**
- `map(.x, .f, ...)` - базовая функция, возвращает список
- `map_if(.x, .p, .f, ...)` - применяет функцию только к элементам, удовлетворяющим условию
- `map_at(.x, .at, .f, ...)` - применяет функцию к элементам по указанным индексам
- `map_lgl(.x, .f, ...)` - возвращает логический вектор
- `map_chr(.x, .f, ...)` - возвращает символьный вектор
- `map_int(.x, .f, ...)` - возвращает целочисленный вектор
- `map_dbl(.x, .f, ...)` - возвращает числовой вектор двойной точности
- `map_dfr(.x, .f, ..., .id = NULL)` - объединяет результаты в data frame по строкам
- `map_dfc(.x, .f, ...)` - объединяет результаты в data frame по столбцам
- `walk(.x, .f, ...)` - выполняет функцию для побочных эффектов, не возвращает значение

---

### 2. Практическая часть  

#### Задание 1: Создание именованного списка фильмов  
Используя данные пакета `repurrrsive`, создан именованный список аналогичный по структуре списку `sw_films`, где именами элементов являются названия фильмов.

**Код решения:**  
```r
library(purrr)
library(repurrrsive)

title <- map_chr(sw_films, "title")
named_films <- set_names(sw_films, title)

named_films[["A New Hope"]]$release_date
  
named_films2 <- sw_films %>% 
  set_names(map_chr(., "title"))

named_films2[["A New Hope"]]$title
```
**Результат:**
Создан именованный список named_films, где к элементам можно обращаться как по индексу, так и по названию фильма. Например, named_films[["A New Hope"]]$release_date возвращает дату выпуска фильма "A New Hope".

#### Задание 2: Исследование функций семейства map*
Изучены и продемонстрированы особенности различных функций семейства `map_*` c использованием тестовых данных.

```r
library(datasets)
library(purrr)

# Базовые тестовые данные
a <- list(1:10)
b <- 1:10
c <- c("a","b","v")
d <- -5:5

# map - базовая функция
map(a, sum)

# map_if - применение функции при условии
map_if(b, function(x) x %% 2 != 0, print)

# map_at - применение к конкретным элементам
map_at(c, c(1,3), print)

# map_lgl - возврат логического вектора
res <- map_lgl(d, function(x) (x > 0))
print(res)

# map_chr - возврат символьного вектора
res_chr <- map_chr(b, as.character)
print(res_chr)

# map_int - возврат целочисленного вектора
res_int <- map_int(res_chr, as.integer)
print(res_int)

# map_dbl - возврат числового вектора
map_dbl(b, function(x) x / 3)

# map_dfr - объединение в data frame по строкам
df_list <- list(
  data.frame(x = 1:2, y = c("a", "b")),
  data.frame(x = 3:4, y = c("c", "d")),
  data.frame(x = 5:6, y = c("e", "f"))
)

result <- map_dfr(df_list, identity, .id = "source")
result2 <- map_dfr(df_list, identity)
print(result)
print(result2)

# map_dfc - объединение в data frame по столбцам
df_list2 <- list(
  data.frame(a = 1:3, b = 4:6),
  data.frame(c = 7:9, d = 10:12),
  data.frame(e = 13:15, f = 16:18),
  data.frame(g = 19:21, h = 22:24)
)

result3 <- map_dfc(df_list2, identity)
print(result3)

# walk - выполнение для побочных эффектов
walk(b, print)
walk(b, function(x) print(x * 10))
```

**Вывод:**
```
[1] TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
[1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"
[1]  1  2  3  4  5  6  7  8  9 10
```

## **Результаты** 
### **Структура репозитория:**  
```
LebskijAA12/02_lab020105_R/
├── project/
|   ├── Zadanie_1.R
|   └── Zadanie_2.R
└── report/
    ├── Отчёт по лабораторной работе №5.md
    └── README.md
```

### **Ссылка на репозиторий:**  
[GitHub Repository Link](https://github.com/Vasapypkin646/LebskijAA12)  

---

## *Выводы*
На основе выполненной лабораторной работы по функциональному программированию можно сделать следующие выводы:

Функциональное программирование представляет собой мощную парадигму, которая позволяет писать более чистый, модульный и сопровождаемый код. Использование пакета purrr значительно упрощает работу с итерациями и преобразованиями данных в языке R.
При выполнении первого задания была продемонстрирована работа с именованными списками и функциями `map_chr()` и `set_names()`. Это показало, как функциональный подход позволяет элегантно преобразовывать структуры данных, создавая удобные именованные объекты для последующей работы.
Второе задание позволило глубоко изучить различные вариации функций семейства map_*. Каждая из этих функций имеет свою специфику:
`map_if()` и `map_at()` предоставляют гибкость в выборе элементов для обработки.
Функции с суффиксами типов (`map_lgl`, `map_chr`, `map_int`, `map_dbl`) автоматически преобразуют результаты в соответствующий тип данных.
`map_dfr()` и `map_dfc()` удобны для работы с табличными данными, автоматически объединяя результаты.
`walk()` идеально подходит для выполнения операций с побочными эффектами, когда возвращаемое значение не требуется.
Особенностью функционального программирования в R является возможность комбинирования функций с помощью конвейеров (`%>%`), что делает код более читаемым и последовательным. Этот подход позволяет создавать сложные цепочки преобразований данных в декларативном стиле.
Приобретенные навыки функционального программирования составляют важную основу для эффективной работы с данными в R и являются необходимым условием для освоения современных методов анализа данных и машинного обучения, где функциональные подходы широко применяются.